<h1>Duplicate data detected</h1>
<p>Potential duplicate records</p>
<div class="record-container">
  <div class="record one-half">
  <% if @employee %>
    <h3>Record <%= @employee.id %>:</h3>
    <p><%= @employee.forenames %> <%= @employee.surname%></p>
    <p>Last updated: <%= @employee.updated_at.strftime("%d/%m/%Y") %></p>
    <p><%= link_to 'View record', admin_employee_path(@employee)%></p>
  <% end %>
  </div>
  <div class="record one-half">
  <% if @potential_duplicate %>
    <h3>Record <%= @potential_duplicate.id %>:</h3>
    <p><%= @potential_duplicate.forenames %> <%= @potential_duplicate.surname%></p>
    <p>Last updated <%= @potential_duplicate.updated_at.strftime("%d/%m/%Y") %></p>
    <p><%= link_to 'View record', admin_employee_path(@potential_duplicate)%></p>
  <% end %>
  </div>
</div>

<h3>Select correct data to merge</h3>
<p>To merge records, select the data you would lke to appear in the record</p>

<%= form_with url: merge_admin_employee_path(@employee), method: :post do |form| %>
  <%= hidden_field_tag :id, @employee.id %>
  
    <fieldset>     
      <div>
        <h3>First Names</h3>
        <div class="record-container">
          <div class="record one-half">
          <%= radio_button_tag :forenames, @employee.forenames, checked: true %>
          <%= label_tag :forenames, @employee.forenames %>
          </div>
          <div class="record one-half">
          <%= radio_button_tag :forenames, @potential_duplicate.forenames %>
          <%= label_tag :forenames, @potential_duplicate.forenames %>
          </div>
        </div>

        <h3>Surname</h3>
        <div class="record-container">
          <div class="record one-half">
          <%= radio_button_tag :surname, @employee.surname, checked: true %>
          <%= label_tag :surname, @employee.surname %>
          </div>
          <div class="record one-half">
          <%= radio_button_tag :surname, @potential_duplicate.surname %>
          <%= label_tag :surname, @potential_duplicate.surname %>
          </div>
        </div>

        <h3>Date of Birth</h3>
        <div class="record-container">
          <div class="record one-half">
          <%= radio_button_tag :date_of_birth, @employee.date_of_birth, checked: true %>
          <%= label_tag :date_of_birth, @employee.date_of_birth %>
          </div>
          <div class="record one-half">
          <%= radio_button_tag :date_of_birth, @potential_duplicate.date_of_birth %>
          <%= label_tag :date_of_birth, @potential_duplicate.date_of_birth %>
          </div>
        </div>

        <h3>Postal Code</h3>
        <div class="record-container">

          <div class="record one-half">
          <%= radio_button_tag :postal_code, @employee.postal_code, checked: true %>  
          <%= label_tag :postal_code, @employee.postal_code %>
          </div>
          <div class="record one-half">
          <%= radio_button_tag :postal_code, @potential_duplicate.postal_code %>
          <%= label_tag :postal_code, @potential_duplicate.postal_code %>
          </div>
        </div>
          
          <%= hidden_field_tag :duplicate_id, @potential_duplicate.id %>
      </div>
    </fieldset>

  <fieldset>
    <h3>Merging data</h3>
    <%= radio_button_tag :merge_action, 'merge', checked: true %>
    <%= label_tag :merge_action_merge, "Merge records" %>
    <%= radio_button_tag :merge_action, 'keep_unique' %>
    <%= label_tag :merge_action_keep_unique, "These records are different. Do not merge" %>
    
    <%= check_box_tag :confirm_action %>
    <%= label_tag :confirm_action, "I confirm that by merging or creating a new record, the loss of any history or archived data will be lost from the discarded record." %>
  </fieldset>

  <%= submit_tag "Confirm selection", class: "button", name: "commit" %>  
<% end %>
